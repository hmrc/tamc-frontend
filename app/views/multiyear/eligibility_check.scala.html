@*
 * Copyright 2022 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import play.twirl.api.Html
@import uk.gov.hmrc.play.views.html._
@import config.ApplicationConfig
@import models.auth.UserRequest
@import includes.{P, InputRadios, Button, ErrorSummary, PageHeading}

@this(
main: main,
applicationConfig: ApplicationConfig,
form: FormWithCSRF,
p: P,
inputRadios: InputRadios,
button: Button,
errorSummary: ErrorSummary,
pageHeading: PageHeading
)

@(eligibilityCheckForm: Form[(MultiYearEligibilityFormInput)])(implicit messages: Messages,
request: UserRequest[_],
formPartialRetriever: uk.gov.hmrc.play.partials.FormPartialRetriever)

@backLinkHref = @{
    if(request.isAuthenticated){
        controllers.routes.EligibilityController.ptaCalculator.url
    } else {
        applicationConfig.applyMarriageAllowanceUrl
    }
}

@main(
pageTitle = Some(Messages("title.eligibility.pattern", Messages("eligibility.check.h1"))),
backLinkHref = Some(backLinkHref)
) {

    @errorSummary(eligibilityCheckForm, Some("marriage-criteria-true"))

    @pageHeading(classes=Some("govuk-!-margin-bottom-3 govuk-heading-xl"),
                context = "This section is ",
                section = "eligibility.check.span.h1",
                text = "eligibility.check.h1"
    )



    @form(action = routes.EligibilityController.eligibilityCheckAction, args = ('id -> "eligibility-form")) {
        <div class="form-group inline">
            @inputRadios(
                form = eligibilityCheckForm,
                legend = "eligibility.check.h1",
                id = Some("marriage-criteria"),
                name = "marriage-criteria",
                items = Seq(RadioItem(
                                content = Text(messages("radio.yes")),
                                value = Some("true"),
                                id = Some("marriage-criteria-true")
                            ), RadioItem(
                                content = Text(messages("radio.no")),
                                value = Some("false"),
                                id = Some("marriage-criteria-false")
                            )),
                legendAsHeading = false,
                fieldSetAttrs = Map("data-inline-error" -> "married-js-error", "id" -> "marriage-criteria"),
                legendClasses = "govuk-visually-hidden"
            )
        </div>
        <div class="tamc-js-hidden error-inline validation-summary" id="married-js-error">
            @p(Text(Messages("eligibility.check.married.error1")))
            @p(Text(Messages("eligibility.check.married.error2")))
        </div>

        <div class="form-group">
            @button(msg = "generic.continue", id = "continue", attrs = Map("data-journey-click" -> "marriage-allowance:click:advance-from-eligibility-questions"))
        </div>
    }
}
